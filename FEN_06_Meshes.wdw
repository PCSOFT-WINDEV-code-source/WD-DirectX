#To edit and compare internal_properties, use WINDEV integrated tools.
#Internal properties refer to the properties of controls in windows, reports, etc.
info :
 name : FEN_06_Meshes
 major_version : 28
 minor_version : 0
 type : 2
 description : ""
 subtype : 0
window :
 name : FEN_06_Meshes
 identifier : 0x29ec56aac0aecf5b
 internal_properties : CAAAAAgAAABPOT89GBbAv4xSRV+mP3MRIyTo0Uph/AGaOxrV4AYxEUjE5GkOmCh0j6hV7cJT77U/QxsEawTQkqJXRlh14ybmeioIn1bOqZIGjMojTL+2qac1OlNRDBBsqnSljG4bWrTe8MA1frnu5MD7InIseEZdPwAwTRc1nZt5eT62k13VELuOJiPYSs4eB39XopQ2GoS1KCisttxAHyyZ7JDrVO40HNrq/y+GaK/z9YXb+GBDRH2EXJpBAfJvhFLbkorPdVZZFMpyxWSJtZiTQl4QS+TL30KK5E4uLSSKsqZZqZawVtOz4mFCHmgGlXMgxfsI2wJHK0XNNQgCPFsCIyqmqHpiQhU/3USXLfzCOVhZlkf+SMm7z5hI/8W7+z1E1Jp8B43hFFk6tdZu1ILTMkZ70m9kwMKtnogCQReyojFRzttdf+UXQMU8KuY68ZR/wDGbHl51WGaYBBdG688bm/hdI+Zi6vlHsIWgQ+8VFEVYW1kkrN2Y+c93uNjjqawqNeFAYfkiF2H2r4ctcMKDhxuPkeCTNOImqgj9+Sh1QawT+5Q9dj+dRD0XPVMZaIwMyouIEVO1m6ywZBvxEtq0bntnk4IAUPr1GBF5HJEtSesslHyLf33uHpS1bsEYlNI9hKAfcciQrLOTKYd5JLHRBHFjjUPzX82FokB3mN8aIeySabbQdPp1ah2UPNSmo8f+iB2ijB8em1fUsEB0ckcjoqA3QghM5uE+3Sd0S+7QlRpIJXa83ekbek9hujWxTUXAgbDMq+mxdgDDeQ7MR4LAVEIyMpYtXTCWY2v1G7ge+BadEh5igLhEazHuuqc5/oLKMmD7GHcAwbWLxbF207I6pYKFEvQ6ed3ONAd8ZyyF1yEU/TCDmzywx3TYmzKniPx9CXTbMPlUr80uLYdVwjsneAxoPCJ0onMoNhUv4E4kVnBAcBPJAACiByR7QUeVFswRRehVS0LE1ikOu8CnjXNafTs+tNj5Eue+rjgCEd6IpNv9lX63RnD1M4Jc/ubLQPFM7oovLBM9BndNIg+iCRhyqyMw9beLTAkkGHTgqgYQ1h4YTA==
 properties :
  width : 796
  height : 606
  widthClient : 794
  heightClient : 574
 controls :
  -
    name : BTN_Echap
    identifier : 0x2c7667406af8259b
    internal_properties : CAAAAAgAAAAvZgKQ4VrWK7pP9/l1Aa4nSgdRxFWaRk66+uWpLSGu/Ydvi5YWVVcggaMjMjOMopII8w3d2gybIF2hAk6CQwlG8cK0fyUEY2duW4uR0MMCgK+fEzz1GRAk4x8wXJ+w7yyv2liIn3RxXNp2uS7rEe2Y2kuoJMhrwluPkNU72yB47u55ej3FYeb1J/8knkD65YH/aj0NgtudbNepXbsfMrBhlqhzVXgIEWoyX3RC3fsxku0ND3Pcmk+mKcmG9Fvc/NCwx/ALhm9HC3B0a+yOmFfDM5tsPOwkNSKRgAZj/N3DSLBLsJkv2Y61Yauhru89IHG1mUiIGvq1DyhU12fuSrmYJuVZvwRJbKnWas7XaaHlfU761sDyyvskXBWg/qyXVyKE/LeGfmQZ4s0Ccq7M6SQLYracOfq5xr0UK0/shKVhrwwGSlbenv2acv0GIqHp4fY5pphS3UO1jnkO0b8Cj106PG1+BzfUftOgP3bE3hNDhH0gh+estVIyTEvHiIvih+6OyUJGK3Cd58avOb/qEtieJTZWzNmIFqzwkxnl0YkorwRvAsOPCI/e4WVWQdvcZvdg0mUkAomalgadG1gKd+XYlez/LsR+R6cVEeOP2M9YJfPtgLoYT6NtxpL2j0pmVi5xz+bG58nscDdiMgAJxIg1KutVG2eiWUF5kPk/AX5fkT7kK+GWV4ON9TD2R7oZ
    properties :
     x : 6
     y : -55
     width : 80
     height : 24
    type : 4
    code_elements :
     type_code : 4
     p_codes :
      -
        internal_properties : CAAAAAgAAADQZyvpRjJZltgKBVFD+SKMukTEU1n2G2jmPSjnx1ZKdSF2vB36egNKcReVrz/xwpIZdIpZoyUu0CjPxu+MpGLAedmE/39iAmJIcu72BpKoWkpseLXy2lnJGPSMFw==
        type : 18
      -
        type : 161
        enabled : false
  -
    name : IMG_DX
    identifier : 0x29ec56aac0b0cf5b
    internal_properties : CAAAAAgAAAClPAFTK8Gq9zJq9yGp5FNLQOOSGQ/IQEH33Cf5vDzsRna50hDDr7j3UHQ64N6jXRFm6Nx0KVqXM55UFKAj1cTjAMlRL28TOJQ1+1McoffOCru3rERRNOoh29Qylh3HguEnsfVd2dvdf9UNXhmFVKKHeRj79nc/aKZJjv1CQwXKejsbOVmK2LcQr9YI6X205w4bddUi25fOKS+mM32s9WiU/CiI47zvFXqm0lVueNlIqrCx+tdxB41wR0eF7NwzkLsNVFee9Q5BBFPZu+tBI8cfNOk185Eg9gZhNu7GqcJLX597f4OGnSN7mR0oM7mGaT7+o27GGlYdQdcOXMe1vnoBxWI/XbtMN5V9g9X8X/01EsVm/I9zsBGJmpYjxQjyTOnu0mDOUmdjCzTmwpvQ7qIoGmU/EatYX2+YkCR+F0VkI/LAfPkIBBr+AnBdDVQfxpzmHU/so7Vb8h2eBEfhqN1zBuQOX+JNir5iLMRtJHPwT2j/Xx3HXtKOec8wq2aj0oOVms68QH1hrST1cV134SlKO485BqvVeI0ibKX0qFbrDykK+cDrZxWYpo5wU48yL8rnRX08//Ak0jW/xwUqedWLRUVr0656dEZkIDbqHeyOTVLXIFYDa5s6Nu67S2DHdFPoSoY=
    properties :
     width : 794
     height : 574
    type : 8
    code_elements :
     internal_properties : CAAAAAgAAAAjW0JkwpJU6bb4H6gOVG5BbTnI6bKQ5jZqh7f+RvG3nM4Lbyno7TyJc8vGsvwgufYtqM9vZ26FX9b1xFxJoxL2v5dwS+B51GY3n8VNnqblK4fCWhAm64k9EtSiN68W
     type_code : 8
     p_codes : []
 menu :
  name : _Menu
  identifier : 0x29ec56aac0b1cf5b
  internal_properties : CAAAAAgAAAD7S+2GOLjEeheq9Y6YZGIRPpLnwB8KUS2je4S4X5oxSGrv51WBBaVxxbk/BTEdUwW0fnnvlhQNIBAuQTAO0S9+S8FMTvDhqkS1JydqFJBfHlbZSFzBkZAjjJ5aIH/cuMnF4Pme57TAyYvjnlkzTJmN5UX9hu+BEl3AsIsso5gsz3oX/KHp1ai/xWZCb54MlUFXdWmT2EOpULKqea/LH9EOlTkaiWsV2aM2/FfXQjTSY3NhAR6zEzKHYKVJwiZULchG0D4LNvRbPifZJPDMmlF6ptz+Rg0QN6SXG5jU7HifIzmkonwDFnOJQw==
  options : []
 languages :
  - fr-FR
 popup_menus : []
 message_bar :
  internal_properties : CAAAAAgAAABHSPkb1tqgSCqRR5dekoL1A/XsC+f7MghpgAiNjk2p+zU290UKFNsf/RG2TXCdD8pkYIQPTC757XGg+l+qdKnSy80OOFd+coZmWvKACTZS1VsEXFXvfAVoTQ4G
 actionbar : {}
 code_elements :
  type_code : 1
  p_codes :
   -
     internal_properties : CAAAAAgAAAALCbO4jh9aunu+jc8ZWhgST0Esw3wW3HogWMaetrxtaIzj1VGV9LlJxNbCag5Q1q3EF8IotkWwHJeMFE5xsHtyKUXauE5lbLMIad44AAYNiWgiVhcBJJsVFX6Qflf2yrXv5shI3v68oCLJI0T6JnfsVZiJCacZ3u4HZDZjzl2hBWa8oc7S63aBc1z3M3ehgk9RwwEYfia/ad1/zQ6UPTjHK+XIRntR7Ef79QwtNroje6ZEpV2wsOZxV/i36kYM+g4WmikNc6mwhrI4yg5oLw==
     code : |1-
      
      //
      // Les meshes permettent de stocker des géométries complexes.
      // Cette fenêtre montre comment utiliser des meshes.
      //
      
      // Objets
      gpclD3D				est un IDirect3D9 dynamique						// Objet de base permettant de créer un "device"
      gpclD3DDevice 		est un IDirect3DDevice9 dynamique				// Objet de manipulation du "device"
      gpclMesh			est un id3dxmesh dynamique						// Objet représentant un mesh
      gtabMaterials		est un tableau de D3DXMATERIAL					// Liste des "materials"
      gtabTextures		est un tableau de IDirect3DTexture9 dynamique	// Liste des textures du mesh
      gnNbMaterials		est un entier sans signe						// Nombre de "materials"
   -
     internal_properties : CAAAAAgAAAA7Evr0L+Ei/amyQ912fk4LCkziAFUS1CnNrpx+Op1jodQBESHgr43TEj2y35GYbQzn+62L6Fmm2xiVFeKzizOMv6ODZ2a92+2bhFzdFxGg99X6rx0XXUPmT4DZZ82ZsBrD71D6JI2tTFyGw9h1iNqmfbwwIPq3RDzdorZvS320tw==
     code : |1-
      
      // Initialise Direct3D
      si D3DInit() ALORS
      	
      	// Initialise les meshes
      	si D3DInitMeshes() ALORS
      		
      		// Démarre le rendu
      		d3daffiche()
      	sinon
      		SI EnModeTestAutomatique ALORS
      			TestEcritRésultat(terInfo, "DirectX n'est pas disponible sur cette machine" + RC + ErreurInfo)
      			Ferme
      			RETOUR
      		FIN
      		
      		erreur("Impossible d'initialiser le vertex buffer")
      	FIN	
      sinon
      	SI EnModeTestAutomatique ALORS
      		TestEcritRésultat(terInfo, "DirectX n'est pas disponible sur cette machine")
      		Ferme
      		RETOUR
      	FIN
      	
      	Erreur("Impossible d'initialiser Direct3D")
      FIN
     type : 34
   -
     type : 180
     enabled : false
   -
     type : 230
     enabled : false
   -
     type : 11
   -
     type : 12
   -
     type : 17
   -
     type : 13
  procedures :
   -
     name : D3DInit
     internal_properties : CAAAAAgAAADH+KPr0UyGMMlv4hwOdz77aIcv7oaUFMb+fsunXnViZHK9D84k0+EydXlAKjocndb4dPTsCdnCwzcpRu0pkeN5irv8489gQWkDV77IycLtlzDZs4CnaFxCB+Y1ujO4/Qv4BBxKyNPSSuPKp6OKeDj6wlvIlyQ3Vz1TnOGAh2mO1rjgfT68wg9GmXuQEa9TIou+EM4uUvhR5LRICbmA31cAJ3Idvh/3wyFepjHcgsz57rkvNhQg
     procedure_id : 1867963238067785563
     type_code : 14
     code : |1-
      // Résumé : Initialise Direct3D
      Procédure D3DInit()
      
      	stD3DPP est un D3DPRESENT_PARAMETERS
      
      	// Création de l'objet Direct3D
      	gpclD3D = Direct3DCreate9(D3D_SDK_VERSION)
      	
      	// Vérifie si l'objet Direct3D a pu être créé
      	si gpclD3D = Null ALORS
      		renvoyer faux	
      	FIN
      	
      	// Paramétrage de la structure utilisée pour créer un "device" Direct3D
      	stD3DPP:Windowed = vrai														// Mode fenêtré
      	stD3DPP:SwapEffect = D3DSWAPEFFECT_DISCARD									
      	stD3DPP:BackBufferFormat = D3DFMT_UNKNOWN
      	stD3DPP:EnableAutoDepthStencil = Vrai										// Z-Buffer
      	stD3DPP:AutoDepthStencilFormat = D3DFMT_D16
      	
      	// Création du "device" Direct3D
      	// On utilise ici l'écran par défaut (D3DADAPTER_DEFAULT) et un "device" matériel (D3DDEVTYPE_HAL)
      	si failed(gpclD3D:CreateDevice(D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, handle(img_dx), D3DCREATE_HARDWARE_VERTEXPROCESSING, stD3DPP, gpclD3DDevice)) _ou_ gpclD3DDevice = null ALORS
      		renvoyer faux
      	FIN
      	
      	// Active le Z-Buffer
      	gpclD3DDevice:SetRenderState(D3DRS_ZENABLE, vrai)
      	
      	// Couleur ambiante
      	gpclD3DDevice:SetRenderState(D3DRS_AMBIENT, D3DCOLOR_aRGB(255, 255, 255, 255))
      
      	
      renvoyer vrai
     type : 458752
   -
     name : D3DInitMeshes
     internal_properties : CAAAAAgAAAA9U1GxMAV5fc8La1+s76s3JgVV8WCEgkwMcod2pilCXKYF1hhIhJShQ57T3l8B2JptcY2AlPM6dzeGxN3bmR+s0E4G/bz8AWPr9RoU9+yo1J9n7r1+JshndQWHzQDkuQDrZQCM/2gcG/qyRAOw3Q3w5pLwk6c1aQ3VTCqZir4zvkRBi+tyQ847OgoKu0qOoZiEYcpOI9X2XqmCea52PUKMpBV85v6WnACFsmckkht9tTvmbvrJ7fwq2RmnW6asOSzL+m4hu1/voXu7AOyyGrJ6qDswLIU7bjqqLTDztK8EgIGpE1CGPXDHYPR8
     procedure_id : 1867963238067851099
     type_code : 14
     code : |1-
      // Résumé : Initialise le "vertex buffer"
      Procédure D3DInitMeshes()
      
      	pclMaterials  est un id3dxbuffer dynamique
      	pMaterial	  est un entier système
      	sTexture	  est une chaine
      	
      	// Charge le mesh
      	si failed(D3DXLoadMeshFromXA(frepexe() + ["\"] + "tiger.x", D3DXMESH_SYSTEMMEM, gpclD3DDevice, null, pclMaterials, null, gnNbMaterials, gpclMesh)) _ou_ gpclMesh = Null ALORS
      		renvoyer faux
      	FIN
      	
      	// Pour extraire les "materials" du mesh, on récupère le pointeur
      	pMaterial = pclMaterials:GetBufferPointer()
      	
      	// Redimensionne le tableau des "materials" et celui des textures
      	dimension(gtabMaterials, gnNbMaterials)
      	dimension(gtabTextures, gnNbMaterials)
      	
      	// Récupère les "materials"
      	transfert(&gtabMaterials, pMaterial, sizeof(gtabMaterials))
      	
      	pour i = 1 _a_ gnNbMaterials
      
      		// Définit la couleur ambiante du "material"
      		gtabMaterials[i]:MatD3D:Ambient = gtabMaterials[i]:MatD3D:Diffuse
      				
      		// Si le "material" possède une texture
      		si gtabMaterials[i]:pTextureFilename <> Null ALORS
      			
      			// Récupère la texture
      			sTexture = ChaîneRécupère(gtabMaterials[i]:pTextureFilename, crAdresseASCIIZ)
      			
      			// Charge la texture
      			si failed(D3DXCreateTextureFromFileA(gpclD3DDevice, frepexe() + ["\"] + sTexture, gtabTextures[i])) _ou_ gtabTextures[i] = null ALORS
      				erreur("Impossible de charger la texture #" + i)
      			FIN
      		FIN		
      	FIN
      	
      renvoyer vrai
     type : 458752
   -
     name : D3DAffiche
     internal_properties : CAAAAAgAAADMO/eXlnZdWlxF3yZ5iA29Uoqy2AZ/0HGepWamq2twjB3N0mUWGwu/B9o5Rort3u4sN/+YoKx7kzw8jYKdYPTCBrjD2drqawuRlMzXmlqs4hfCW60w2zZZL+KX19xtYHXdKCsk2l9o/HAN4a9J0BQPCU/l4dngIdn9Hv43pzjltVKmtvLtVdOHA8KN2Enu/P+CQcC7FPYSJizalumonJZbxVkdNem8Y5PBHO5UwvdtSCREHXD+olTXVXthEwdeB2SiAyPJG6b22CRmSGKvflL1h+Qn9zfn3kQnGDNOyvATMA==
     procedure_id : 1867963238067916635
     type_code : 14
     code : |1-
      // Résumé : Rendu et affichage du "device" Direct3D
      // Procédure automatique :
      // La procédure est exécutée manuellement, lors d'un appel dans le code
      // Elle sera répétée en boucle, en attendant  entre chaque appel
      // Chaque appel suivant exécute une seule fois la procédure, sans timer
      // 
      Procédure D3DAffiche()
      
      	// Si le "device" Direct3D est invalide, on sort
      	si gpclD3DDevice = null alors retour
      	
      	// Efface le "backbuffer" avec une couleur bleue
      	gpclD3DDevice:Clear(0, null, D3DCLEAR_TARGET | D3DCLEAR_ZBUFFER, D3DCOLOR_XRGB(0, 0, 255), 1.0, 0.0)
      	
      	// Démarre la scène
      	si SUCCEEDED(gpclD3DDevice:BeginScene()) ALORS
      		
      		// Définit et applique les matrices
      		D3DInitMatrices()
      		
      		// Les meshes sont divisés en "subsets", un pour chaque "material"
      		pour i = 1 _a_ gnNbMaterials
      			
      			// Définit le "material" et la texture du "subset"
      			gpclD3DDevice:SetMaterial(gtabMaterials[i]:MatD3D)
      			gpclD3DDevice:SetTexture(0, gtabTextures[i])
      			
      			// Dessin du subset
      			gpclMesh:DrawSubset((i - 1))			
      		FIN
      		
      		// Fin de la scène
      		gpclD3DDevice:EndScene()
      	FIN
      	
      	// Affichage du "backbuffer"
      	gpclD3DDevice:Present(null, null, null, null)
     type : 458752
   -
     name : D3DInitMatrices
     internal_properties : CAAAAAgAAAAIYL1xCt+QoR4pXpiFCiF+c6a9S8tlQm20pAg0N2e+5x4uFjZddrwYBkT12nJfM4koYadanVkhnHvuKgT0pooMt4tonQRlaZ0kk9VBB38nj/g7NPRQy1TjowjDU8gxlfAayVKCpzoiTV3QG3Rlh6wNOB4krWvsq1AFyhkZVs6Sg35Q8lJTsL0o1vsNmx56qyV5DieWXVkr04YlG69UX5u2RPKaNu7r
     procedure_id : 1867963238067982171
     type_code : 14
     code : |1+
      // Résumé : Initialisation des matrices
      PROCEDURE D3DInitMatrices()
      
      	nHeure est un entier
      	rAngle est un reel sur 4
      	
      	stMatWorld 	est un D3DXMATRIX	// Matrice de représentation du "monde" Direct3D
      	stMatView	est un D3DXMATRIX	// Matrice de représentation de la "vue" Direct3D
      	stMatProj	est un D3DXMATRIX	// Matrice de projection Direct3D
      	stVecEye	est un D3DXVECTOR3	// Position de l'oeil
      	stVecCam	est un D3DXVECTOR3	// Direction de l'oeil
      	stVecUp		est un D3DXVECTOR3	// Elévation de la caméra
      	
      	// Définit une rotation en fonction du temps
      	nHeure = D3DXGetTime()
      	rAngle = nHeure / 1000
      	D3DXMatrixRotationY(stMatWorld, rAngle)
      	
      	// Applique la rotation
      	gpclD3DDevice:SetTransform(D3DTS_WORLD, stMatWorld)
      	
      	// Initialise les vecteurs de vue
      	stVecEye = [0.0, 3.0, -5.0]
      	stVecCam = [0.0, 0.0,  0.0]
      	stVecUp  = [0.0, 1.0,  0.0]
      	
      	// Définit la matrice de vue
      	D3DXMatrixLookAtLH(stMatView, stVecEye, stVecCam, stVecUp)
      	
      	// Applique la vue
      	gpclD3DDevice:SetTransform(D3DTS_VIEW, stMatView)
      	
      	// Définit la matrice de projection
      	D3DXMatrixPerspectiveFovLH(stMatProj, D3DX_PI / 4.0, 1.0, 1.0, 100.0)
      	
      	// Applique la matrice de projection
      	gpclD3DDevice:SetTransform(D3DTS_PROJECTION, stMatProj)
     type : 458752
  templates :
   -
     name : FEN_06_Meshes
     identifier : 0x1543d3fb36962671
     code_elements :
      internal_properties : CAAAAAgAAACIMP8rh0cZMm+J7g8RNUlsXiqZmOPRK/tf/B3QBD1vZObrdyk+TdDl36cYuEymKXecYWBOpMsaqp9eu12KXJn/pLRlhrumBxv40PYcrbfKDuiju791pEByR5nn6hq7
      type_code : 1
      p_codes :
       -
         code : |1-
          
       -
         code : |1-
          
         type : 34
       -
         type : 180
         enabled : false
       -
         type : 230
         enabled : false
       -
         code : |1-
          
         type : 2
       -
         code : |1-
          
         type : 11
       -
         code : |1-
          
         type : 12
       -
         code : |1-
          
         type : 17
       -
         code : |1-
          
         type : 13
  procedure_templates : []
  property_templates : []
 code_parameters :
  internal_properties : CAAAAAgAAAD41EFVWFF7SAwzd+8+tTlPQzQOqrePoffe3zujAQsXVPKhnbz1Vze9uX1xEHfGZ53L/ImwBVh7QM0ijTy26nuXl6nmgRuF687jh7MrAxkw2m0o/GTSE2RmszekPw==
  original_name : FEN_Fenêtre1
resources :
 string_res :
  identifier : 0x10d999021019b8d8
  internal_properties : CAAAAAgAAACa/HBK/CUtN70EwGNqHiA5Ong4hctn68fiPi5bW47/f5kdMy4EhFbbsLDr9WzJV0mJiQ==
custom_note :
 internal_properties : CAAAAAgAAAC68/W0/adbG0nFCRhrE42B5HRnbDzVHaz86sSQyxlBk7I=
rad :
 internal_properties : CAAAAAgAAABoAN7PLpwJW3EiA7WVZdCA5EwrCA1rvutcDHooMWKe
